"use strict";(self.webpackChunkblootusk=self.webpackChunkblootusk||[]).push([[222],{6222:(it,T,a)=>{a.r(T),a.d(T,{CustomerModule:()=>b});var d=a(7799),p=a(6895),y=a(9189),l=a(4006),w=a(8796),h=a(1366),I=a(4333),A=a(6362),k=a(7187),S=a(5226),Z=a.n(S),t=a(4650),C=a(7668),x=a(6788),v=a(9957);function U(i,n){if(1&i&&(t.TgZ(0,"option",32),t._uU(1),t.qZA()),2&i){const e=n.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}function N(i,n){if(1&i&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA()()),2&i){const e=n.$implicit;t.xp6(2),t.hij("",t.xi3(3,4,e.transactionDate,"dd/MM/yyyy")," "),t.xp6(3),t.hij("",e.transactionType," "),t.xp6(2),t.hij("",e.rewardPoint," "),t.xp6(2),t.Oqu(e.merchantName)}}class m{constructor(n,e,o,s,r){this.appService=n,this.EncrDecr=e,this.route=o,this.tokenStorage=s,this.router=r,this.page=1,this.count=10,this.rewardPointId=0,this.selectedValue="",this.TransactionTypeLists=[{name:"Signup",id:"1"},{name:"Refferal",id:"2"},{name:"Redeem",id:"3"}]}ngOnInit(){this.customerId=this.tokenStorage.getcustcode(),this.phoneNumber=this.tokenStorage.GetPhoneNO(),this.GettemplateList()}getPageData(){const n=(this.page-1)*this.count;return this.CustomerRewardList.slice(n,n+this.count)}onChangeShareCapitalType(n){null!=n.target.value?this.rewardPointId=n.target.value:n.target.value.options=0}GettemplateList(){null==this.rewardPointId&&(this.rewardPointId=0),this.CustPhoneNumber=this.EncrDecr.set("12$#@BLOO$^@TUSK",this.phoneNumber),this.appService.GetAllRewardPonit("api/User/GetCustomerListForReward?rewardPointId="+this.rewardPointId+"&PhoneNumber="+this.phoneNumber).subscribe(n=>{this.CustomerRewardList=n.responseData.customerList,console.log("testrewardpoint",this.CustomerRewardList),0==n.responseData.length&&Z().fire({title:"Data not found",icon:"info",confirmButtonColor:"#364574",allowOutsideClick:!1,allowEscapeKey:!1}),this.rewardPointId=0})}ClearSearchdata(){this.selectedValue="",this.GettemplateList()}static#t=this.\u0275fac=function(e){return new(e||m)(t.Y36(C.z),t.Y36(x.z),t.Y36(d.gz),t.Y36(v.i),t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:m,selectors:[["app-rewardpointlist"]],decls:55,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","card-header-table","align-items-center","d-flex"],[1,"ri-trophy-line","cardicon"],[1,"card-title","mb-0","flex-grow-1"],[1,"flex-shrink-0"],[1,"card-body"],[1,"live-preview"],[1,"row","mb-3"],[1,"col-md-4"],["for","basiInput",1,"form-label"],["aria-label","Default select example",1,"form-select",3,"ngModel","ngModelChange","change"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-8"],[1,"mt-4","text-right","gap-1"],["type","button",1,"btn","btn-primary","ms-auto",3,"click"],[1,"ri-search-line","cardicon","label-icon","align-middle"],[1,"ri-refresh-line","cardicon","label-icon","align-middle"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","align-middle","table-nowrap","mb-0"],[1,"table-light"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center","mt-3"],[1,"gridjs-pagination"],[1,"gridjs-pages"],["tabindex","0","role","button","title","Previous","aria-label","Previous"],["tabindex","0","role","button"],["tabindex","0","role","button","title","Next","aria-label","Next"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"i",5),t.TgZ(6,"h4",6),t._uU(7,"Reward Points List"),t.qZA(),t._UZ(8,"div",7),t.qZA(),t.TgZ(9,"div",8)(10,"div",9)(11,"div",3)(12,"div",8)(13,"div",10)(14,"div",11)(15,"div")(16,"label",12),t._uU(17,"Transaction Type "),t.qZA(),t.TgZ(18,"select",13),t.NdJ("ngModelChange",function(r){return o.selectedValue=r})("change",function(r){return o.onChangeShareCapitalType(r)}),t.TgZ(19,"option",14),t._uU(20,"Select a value"),t.qZA(),t.YNc(21,U,2,2,"option",15),t.qZA()()(),t.TgZ(22,"div",16)(23,"div",17)(24,"button",18),t.NdJ("click",function(){return o.GettemplateList()}),t._UZ(25,"i",19),t._uU(26,"Search"),t.qZA(),t._uU(27," \xa0 "),t.TgZ(28,"button",18),t.NdJ("click",function(){return o.ClearSearchdata()}),t._UZ(29,"i",20),t._uU(30,"Clear"),t.qZA()()()()()(),t._UZ(31,"hr"),t.TgZ(32,"div",21)(33,"table",22)(34,"thead",23)(35,"tr")(36,"th",24),t._uU(37,"Transaction Date"),t.qZA(),t.TgZ(38,"th",24),t._uU(39,"Transaction Type"),t.qZA(),t.TgZ(40,"th",24),t._uU(41,"Reward Points"),t.qZA(),t.TgZ(42,"th",24),t._uU(43,"Merchant Name"),t.qZA()()(),t.TgZ(44,"tbody"),t.YNc(45,N,10,7,"tr",25),t.qZA()()(),t.TgZ(46,"div",26)(47,"div",27)(48,"div",28)(49,"button",29),t._uU(50,"Previous"),t.qZA(),t.TgZ(51,"button",30),t._uU(52,"1"),t.qZA(),t.TgZ(53,"button",31),t._uU(54,"Next"),t.qZA()()()()()()()()()()),2&e&&(t.xp6(18),t.Q6J("ngModel",o.selectedValue),t.xp6(3),t.Q6J("ngForOf",o.TransactionTypeLists),t.xp6(24),t.Q6J("ngForOf",o.CustomerRewardList))},dependencies:[p.sg,l.YN,l.Kr,l.EJ,l.JJ,l.On,p.uU]})}var L=a(262),D=a(2843),M=a(3259),F=a(4159),O=a.n(F),q=a(6626);function P(i,n){1&i&&(t.TgZ(0,"label",46),t._uU(1),t._UZ(2,"i",47),t.qZA()),2&i&&(t.xp6(1),t.hij(" ","Transferable"," "))}function R(i,n){1&i&&(t.TgZ(0,"label",48),t._uU(1),t._UZ(2,"i",49),t.qZA()),2&i&&(t.xp6(1),t.hij(" ","Non Transferable"," "))}function B(i,n){1&i&&(t.TgZ(0,"h6",53),t._uU(1),t.qZA()),2&i&&(t.xp6(1),t.hij(" ","Live"," "))}function E(i,n){1&i&&(t.TgZ(0,"h6",54),t._uU(1),t.qZA()),2&i&&(t.xp6(1),t.hij(" ","Expired"," "))}function J(i,n){1&i&&(t.TgZ(0,"h6",55),t._uU(1),t.qZA()),2&i&&(t.xp6(1),t.hij(" ","Availed"," "))}function j(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,B,2,1,"h6",50),t.YNc(2,E,2,1,"h6",51),t.YNc(3,J,2,1,"h6",52),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",1==e.status),t.xp6(1),t.Q6J("ngIf",2==e.status),t.xp6(1),t.Q6J("ngIf",3==e.status)}}function Q(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,r=t.oxw();return t.KtG(r.shareReferralLink(s.couponCode,s.source))}),t._UZ(1,"i",57),t.qZA()}}function G(i,n){1&i&&(t.TgZ(0,"a",58),t._UZ(1,"i",59),t.qZA())}function Y(i,n){1&i&&(t.TgZ(0,"a",58),t._UZ(1,"i",60),t.qZA())}function $(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"div",19)(3,"div",20)(4,"div",21)(5,"div",22),t._UZ(6,"img",23),t.YNc(7,P,3,1,"label",24),t.YNc(8,R,3,1,"label",25),t.qZA(),t.TgZ(9,"div",26),t.YNc(10,j,4,3,"div",27),t.YNc(11,Q,2,0,"button",28),t.qZA()(),t.TgZ(12,"div",21)(13,"div",29)(14,"div",30)(15,"h6",31),t._uU(16),t.YNc(17,G,2,0,"a",32),t.YNc(18,Y,2,0,"a",32),t._uU(19," Off "),t.qZA()()()(),t.TgZ(20,"div",21)(21,"div",29)(22,"div",33)(23,"h6",34),t._uU(24),t.qZA()()()(),t.TgZ(25,"div",21)(26,"div",29)(27,"div",30)(28,"h5",35),t._uU(29),t.qZA()()()(),t.TgZ(30,"div",21)(31,"div",29)(32,"div",36)(33,"h5",37),t._uU(34),t.qZA()()()(),t.TgZ(35,"div",38)(36,"table")(37,"tr")(38,"td",39)(39,"tr")(40,"td",40),t._UZ(41,"img",41),t.qZA(),t.TgZ(42,"td",40)(43,"h6",42),t._uU(44,"Campaign Source"),t.qZA(),t.TgZ(45,"h5",43),t._uU(46),t.qZA()()()(),t.TgZ(47,"td",44)(48,"h6",42),t._uU(49,"Expire Date"),t.qZA(),t.TgZ(50,"h5",43),t._uU(51),t.ALo(52,"date"),t.qZA()()()(),t.TgZ(53,"button",45),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw(),u=t.MAs(21);return t.KtG(c.openModalQR(u,r.couponCode,r.source))}),t._uU(54," View QR Code "),t.qZA()()()()()()}if(2&i){const e=n.$implicit;t.xp6(7),t.Q6J("ngIf",1==e.couponType),t.xp6(1),t.Q6J("ngIf",2==e.couponType),t.xp6(2),t.Q6J("ngIf",2==e.couponType),t.xp6(1),t.Q6J("ngIf",1==e.couponType),t.xp6(5),t.hij("",e.discountValue," "),t.xp6(1),t.Q6J("ngIf","percentage"==e.discountType),t.xp6(1),t.Q6J("ngIf","dollar"==e.discountType),t.xp6(6),t.Oqu(e.couponDiscerption),t.xp6(5),t.Oqu(e.merchantDetail),t.xp6(5),t.hij("Coupon Code : ",e.couponCode,""),t.xp6(7),t.s9C("src",e.imageUrl,t.LSH),t.xp6(5),t.Oqu(e.source),t.xp6(5),t.Oqu(t.xi3(52,13,e.endDate,"dd/MM/yyyy"))}}function z(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"button",65),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw(2);return t.KtG(c.onPageChanged3(r))}),t._uU(1),t.qZA()}if(2&i){const e=n.$implicit,o=t.oxw(2);t.ekj("gridjs-currentPage",o.page===e),t.uIk("title","Page "+e)("aria-label","Page "+e),t.xp6(1),t.hij(" ",e," ")}}function K(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",61)(1,"button",62),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onPageChanged3(s.page-1))}),t._uU(2," Previous "),t.qZA(),t.YNc(3,z,2,5,"button",63),t.TgZ(4,"button",64),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onPageChanged3(s.page+1))}),t._uU(5," Next "),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("disabled",1===e.page),t.xp6(2),t.Q6J("ngForOf",e.getPageNumbers3()),t.xp6(1),t.Q6J("disabled",e.page===e.getTotalPages3())}}function H(i,n){if(1&i&&(t.TgZ(0,"div",74)(1,"label",75),t._uU(2),t.qZA(),t._UZ(3,"br")(4,"img",76)(5,"img",77),t.qZA()),2&i){const e=n.$implicit,o=t.oxw(2);t.Q6J("id",e),t.xp6(2),t.hij("Merchant Name: ",o.merchantName," "),t.xp6(3),t.s9C("src",o.qrCode,t.LSH)}}function V(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",66)(1,"h5",67),t._uU(2,"QR Code"),t.qZA(),t.TgZ(3,"button",68),t.NdJ("click",function(){const r=t.CHM(e).$implicit;return t.KtG(r.dismiss("Cross click"))}),t.qZA()(),t.TgZ(4,"div",69)(5,"div")(6,"form")(7,"div",10)(8,"div",29),t.YNc(9,H,6,3,"div",70),t.qZA()(),t.TgZ(10,"div",71)(11,"a",72),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.trivialDownload())}),t._UZ(12,"i",73),t._uU(13," Download QR Code"),t.qZA()()()()()}if(2&i){const e=t.oxw();t.xp6(9),t.Q6J("ngForOf",e.array)}}class f{constructor(n,e,o,s,r,c,u,g){this.formBuilder=n,this.modalService=e,this.appService=o,this.route=s,this._authService=r,this.tokenStorage=c,this.router=u,this.EncrDecr=g,this.CustomerCouponList=[],this.page=1,this.count=12,this.array=["Qr"]}ngOnInit(){this.customerId=this.tokenStorage.getcustcode(),this.CustPhoneNumber=this.tokenStorage.GetPhoneNO(),this.phoneNumber=this.EncrDecr.set("12$#@BLOO$^@TUSK",this.CustPhoneNumber),this.GetCouponList(1)}GetCouponList(n){this.appService.GetAllList("api/CouponMaster/GetCustomerCouponList",{phoneNumber:""==this.phoneNumber?"":this.phoneNumber,customerId:0,pageNumber:this.page,couponFilter:n}).pipe((0,L.K)(o=>(0,D._)(o))).subscribe(o=>{this.CustomerCouponList=o.responseData.couponList,0==o.responseData.length&&this.swalMessage("Data not found")})}swalMessage(n){Z().fire({title:n,icon:"info",confirmButtonColor:"#364574",allowOutsideClick:!1,allowEscapeKey:!1})}openModalQR(n,e,o){this.merchantName=o,this.receivedLink="/"+e+"/"+this.CustPhoneNumber,this.receivedLink="http://crm.blootusk.com/#/C/"+e+"/"+this.CustPhoneNumber,M.hz(this.receivedLink,(s,r)=>{s?console.error(s):this.qrCode=r}),this.modalService.open(n,{size:"sm"})}trivialDownload(){console.log("Downloading image one by one, without a loop"),this._download(0,this.array)}_download(n,e){if(n>=e.length)console.log("Done!");else{let o=document.getElementById(e[n].toString());O()(o).then(s=>{let r=s.toDataURL("image/png").replace("image/png","image/octet-stream"),c=document.createElement("a");c.href=r,c.download=`${e[n]}.png`,c.click(),this._download(n+1,e)})}}getPageData(){let n;const e=(this.page-1)*this.count;return null!=this.CustomerCouponList&&(n=this.CustomerCouponList.slice(e,e+this.count)),n}onPageChanged3(n){this.page=n,window.scrollTo(0,0)}getPageNumbers3(){return Array.from({length:this.getTotalPages3()},(n,e)=>e+1)}getTotalPages3(){return Math.ceil(this.CustomerCouponList.length/this.count)}ShareInputMessage(n){const e=document.createElement("textarea");e.value=n,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}shareMessage(){navigator.share?navigator.share({title:"Shared Message",text:"Check out this amazing message!\n\nhttps://your-website.com"}).then(()=>console.log("Successfully shared")).catch(o=>console.log("Error sharing:",o)):console.log("Web Share API is not supported. Fallback:")}shareReferralLink(n,e){let o="Hi, I just discovered a great place called "+e+". Show this coupon";const s=window.location.href.split("#");navigator.share?navigator.share({title:"Shared Message",text:`${o}\n\n${(s.length>0?s[0]:"")+"#/C/"+n} at store and enjoy coupon benefits`}).then(()=>console.log("Successfully shared")).catch(g=>console.log("Error sharing:",g)):console.log("Web Share API is not supported. Fallback:")}static#t=this.\u0275fac=function(e){return new(e||f)(t.Y36(l.qu),t.Y36(h.FF),t.Y36(C.z),t.Y36(d.gz),t.Y36(q.$),t.Y36(v.i),t.Y36(d.F0),t.Y36(x.z))};static#e=this.\u0275cmp=t.Xpm({type:f,selectors:[["app-discountcouponlist"]],decls:22,vars:2,consts:[[1,"row","project-wrapper"],[1,"col-xxl-8"],[1,"container"],[1,"gap-1"],["type","button",1,"btn","btn-success",3,"click"],[1,"ri-coupon-line","cardicon","align-middle"],["type","button",1,"btn","btn-warning",3,"click"],[1,"ri-coupon-fill","cardicon","align-middle"],["type","button",1,"btn","btn-danger",3,"click"],[1,"ri-coupon-2-fill","cardicon","align-middle"],[1,"row"],["class","col-xl-3",4,"ngFor","ngForOf"],[1,"text-center","mt-3"],[1,"gridjs-pagination"],["class","gridjs-pages",4,"ngIf"],["role","document"],["qrcontent",""],[1,"col-xl-3"],[1,"animate"],[1,"card-body","card","card-animate","mt-2"],[1,""],[1,"row","mb-0"],[1,"col-md-8","mt-1"],["src","../../../../assets/images/cupico.png","alt","","height","20",1,"cupico"],["style","font-size: 12px; margin-right: 2px;",4,"ngIf"],["style","font-size: 12px;",4,"ngIf"],[1,"col-md-4","text-right","mt-2"],[4,"ngIf"],["type","button","class","btn btn-primary","style","background-color: #007bff; color: #fff; padding: 5px 10px; border: none; border-radius: 4px; cursor: pointer; text-align: center;",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"mt-0"],[1,"mb-0"],["class","link-success fs-11",4,"ngIf"],[1,"mt-2"],[1,"cupdis"],[1,"cupnm"],[1,"cupcd"],[1,"mb-0","cupdis"],[1,"row","mb-0","mt-2"],[1,"w-40"],[1,"w-4"],["alt","","height","40",1,"cupimg",3,"src"],[1,"cpdt"],[1,"cpd"],[1,"w-30"],["type","button",1,"btn","btn-primary",3,"click"],[2,"font-size","12px","margin-right","2px"],["ngbTooltip","Transferable Coupon: A Coupon that can be shared with friends and family. Spread the  benefits by forwarding this coupon to others.",1,"ri-information-fill","infoicon"],[2,"font-size","12px"],["ngbTooltip","Non-Transferable Coupon: A Coupon exclusively for you. This Coupon is Specific to your account and cannot be forwarded to others.",1,"ri-information-fill","infoicon"],["style","color: green;",4,"ngIf"],["style","color: red;",4,"ngIf"],["style","color: orange;",4,"ngIf"],[2,"color","green"],[2,"color","red"],[2,"color","orange"],["type","button",1,"btn","btn-primary",2,"background-color","#007bff","color","#fff","padding","5px 10px","border","none","border-radius","4px","cursor","pointer","text-align","center",3,"click"],[1,"ri-share-line","label-icon","align-middle"],[1,"link-success","fs-11"],[1,"ri-percent-line"],[1,"bx","bx-dollar"],[1,"gridjs-pages"],["tabindex","0","role","button","title","Previous","aria-label","Previous",3,"disabled","click"],["tabindex","0","role","button",3,"gridjs-currentPage","click",4,"ngFor","ngForOf"],["tabindex","0","role","button","title","Next","aria-label","Next",3,"disabled","click"],["tabindex","0","role","button",3,"click"],[1,"modal-header"],[1,"modal-title","mt-0"],["type","button","aria-hidden","true",1,"btn-close",3,"click"],[1,"modal-body"],["class","qr-code-container",3,"id",4,"ngFor","ngForOf"],[1,"mt-3","text-center"],["type","submit",1,"btn","btn-success",3,"click"],[1,"ri-download-line","label-icon","align-middle","me-2"],[1,"qr-code-container",3,"id"],["for","basiInput",1,"form-label","merchant",2,"text-align","center"],["src","assets/images/Logo_squre.jpg","alt","Logo",1,"logo"],["alt","QR Code",1,"qr-code",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return o.GetCouponList(1)}),t._UZ(5,"i",5),t._uU(6," Available"),t.qZA(),t._uU(7," \xa0 "),t.TgZ(8,"button",6),t.NdJ("click",function(){return o.GetCouponList(3)}),t._UZ(9,"i",7),t._uU(10," Redeemed"),t.qZA(),t._uU(11," \xa0 "),t.TgZ(12,"button",8),t.NdJ("click",function(){return o.GetCouponList(2)}),t._UZ(13,"i",9),t._uU(14," Expired"),t.qZA()()(),t.TgZ(15,"div",10),t.YNc(16,$,55,16,"div",11),t.TgZ(17,"div",12)(18,"div",13),t.YNc(19,K,6,3,"div",14),t.qZA()()(),t.YNc(20,V,14,1,"ng-template",15,16,t.W1O),t.qZA()()),2&e&&(t.xp6(16),t.Q6J("ngForOf",o.getPageData()),t.xp6(3),t.Q6J("ngIf",o.CustomerCouponList.length>0))},dependencies:[p.sg,p.O5,l._Y,l.JL,l.F,h._L,p.uU],styles:[".project-wrapper[_ngcontent-%COMP%]{border-radius:10px;margin-top:-10px;margin-bottom:10px;padding-bottom:12px}.cupico[_ngcontent-%COMP%]{margin-left:-5px}.cupbody[_ngcontent-%COMP%]{background:inherit;border-radius:10px;border:1.5px solid #405189;padding:8px!important;margin-top:12px;cursor:pointer}.cupdis[_ngcontent-%COMP%]{font-size:11px}.cupnm[_ngcontent-%COMP%]{font-size:13px;color:#6570b3}.cupcd[_ngcontent-%COMP%]{text-align:center;border-radius:50px;border:1px solid #3d419e;padding:8px!important;margin:5px}.w-30[_ngcontent-%COMP%]{border-left:1px solid #bebebe}.cpdt[_ngcontent-%COMP%]{color:#9b4c4c;font-size:9px;padding-left:7px}.cpd[_ngcontent-%COMP%]{font-size:9px;padding-left:7px}.w-4[_ngcontent-%COMP%]{padding-left:5px}.cupimg[_ngcontent-%COMP%]{border-radius:50%;margin-top:-8px}ngx-qrcode[_ngcontent-%COMP%]{width:200px;height:200px}.qr-code-container[_ngcontent-%COMP%]{position:relative}.logo[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:70px;height:70px}.qr-code[_ngcontent-%COMP%]{width:100%;height:100%}"]})}function W(i,n){1&i&&(t.TgZ(0,"span",20),t._uU(1,"Copied!"),t.qZA())}function X(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"tbody")(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td")(5,"input",14),t.NdJ("change",function(s){const r=t.CHM(e),c=r.$implicit,u=r.index,g=t.oxw();return t.KtG(g.toggle(c.userCustId,s.target,u))}),t.qZA()(),t.TgZ(6,"td")(7,"button",15),t.NdJ("click",function(){const s=t.CHM(e),r=s.$implicit,c=s.index,u=t.oxw();return t.KtG(u.copyInputMessage(r.rEfferalLink,c))}),t._UZ(8,"i",16),t.YNc(9,W,2,0,"span",17),t.qZA()(),t.TgZ(10,"td")(11,"button",18),t.NdJ("click",function(){const r=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.shareReferralLink(r.rEfferalLink))}),t._UZ(12,"i",19),t.qZA()(),t.TgZ(13,"td"),t._uU(14),t.qZA()()()}if(2&i){const e=n.$implicit,o=n.index,s=t.oxw();t.xp6(3),t.Oqu(e.rEfferalLink),t.xp6(2),t.Q6J("checked",e.stopSms),t.xp6(4),t.Q6J("ngIf",s.lastClickedButtonIndex==o),t.xp6(5),t.Oqu(e.merchantName)}}class _{constructor(n,e,o,s,r){this.appService=n,this.EncrDecr=e,this.route=o,this.tokenStorage=s,this.router=r,this.page=1,this.count=10,this.lastClickedButtonIndex=null}ngOnInit(){this.customerId=this.tokenStorage.getcustcode(),this.phoneNumber=this.tokenStorage.GetPhoneNO(),this.GetRewardPointList()}getPageData(){const n=(this.page-1)*this.count;return this.CustomerList.slice(n,n+this.count)}GetRewardPointList(){this.appService.getById("api/User/GetRefferalLinkList/",this.phoneNumber).subscribe(n=>{console.log(n.responseData),this.CustomerList=n.responseData.referlist})}copyInputMessage(n,e){const o=document.createElement("textarea");o.value=n,document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),navigator.clipboard&&navigator.clipboard.writeText(n).then(()=>console.log("Text copied successfully")).catch(s=>console.error("Error copying text: ",s)),this.lastClickedButtonIndex=e,setTimeout(()=>{this.lastClickedButtonIndex=null},3e3)}ClearSearchdata(){this.keyword="",this.router.navigate(["/customer/referrallist"],{relativeTo:this.route}),this.GetRewardPointList()}copyData(n){return JSON.stringify(n)}toggle(n,e,o){this.appService.Add("api/User/UpdateCustomerMerchant",{userMerchantMapperId:n,stopMessage:e.checked,merchantId:0,customerId:0,referCode:"",referBy:0,approvlStatus:""}).subscribe(r=>{console.log("adddata",r.responseData)})}shareReferralLink(n){const e=`Check out this referral link: ${n}`;if(navigator.share)navigator.share({title:"Share Referral Link",text:e,url:n}).then(()=>console.log("Successfully shared")).catch(o=>console.log("Error sharing:",o));else if(/WhatsApp/.test(navigator.userAgent)){const s=`https://api.whatsapp.com/send?text=${encodeURIComponent(e)}`;window.location.href=s}else alert(`Share this link: ${n}`)}static#t=this.\u0275fac=function(e){return new(e||_)(t.Y36(C.z),t.Y36(x.z),t.Y36(d.gz),t.Y36(v.i),t.Y36(d.F0))};static#e=this.\u0275cmp=t.Xpm({type:_,selectors:[["app-refferal-link"]],decls:26,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","card-header-table","align-items-center","d-flex"],[1,"ri-user-fill","cardicon"],[1,"card-title","mb-0","flex-grow-1"],[1,"card-body"],[1,"live-preview"],[1,"table-responsive"],[1,"table","table-bordered","table-striped","align-middle","table-nowrap","mb-0"],[1,"table-light"],["scope","col"],[4,"ngFor","ngForOf"],["type","checkbox",3,"checked","change"],[3,"click"],[1,"ri-file-copy-2-fill"],["class","side-text",4,"ngIf"],["type","button",1,"btn","btn-primary",2,"background-color","#007bff","color","#fff","padding","5px 10px","border","none","border-radius","4px","cursor","pointer","text-align","center",3,"click"],[1,"ri-share-line","label-icon","align-middle"],[1,"side-text"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"i",5),t.TgZ(6,"h4",6),t._uU(7,"Referral Link List"),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8),t._UZ(10,"hr"),t.TgZ(11,"div",9)(12,"table",10)(13,"thead",11)(14,"tr")(15,"th",12),t._uU(16,"Referral Link"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Stop SMS"),t.qZA(),t.TgZ(19,"th",12),t._uU(20,"Copy"),t.qZA(),t.TgZ(21,"th",12),t._uU(22,"Share"),t.qZA(),t.TgZ(23,"th",12),t._uU(24,"Merchant Name"),t.qZA()()(),t.YNc(25,X,15,4,"tbody",13),t.qZA()()()()()()()()),2&e&&(t.xp6(25),t.Q6J("ngForOf",o.CustomerList))},dependencies:[p.sg,p.O5],styles:[".share-button[_ngcontent-%COMP%]{border:none;background-color:#0056b3;padding:15px 32px;height:auto;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;cursor:pointer}"]})}var tt=a(4466);let et=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({}),i})();const nt=[{path:"referrallist",component:k.N},{path:"rewardpointlist",component:m},{path:"discountcouponlist",component:f},{path:"refferalLink",component:_}];class b{static#t=this.\u0275fac=function(e){return new(e||b)};static#e=this.\u0275mod=t.oAB({type:b});static#n=this.\u0275inj=t.cJS({imports:[p.ez,w.A0,tt.m,h.Oz,et,y.O,d.Bz.forChild(nt),l.u5,I.JX,l.u5,A.JT,l.UX,h.IJ,d.Bz]})}}}]);